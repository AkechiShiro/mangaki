{% extends "base.html" %}

{% block body %}
{% if user.is_authenticated %}
<div class="well">
  <p>Bienvenue !</p>
  <ol>
    <li>
      Notez quelques anime : soit en parcourant la liste ci-dessous
      {% if params.flat == '1' %}
          (<a href="?{{ url }}&amp;page={{ params.page }}">afficher les posters</a>),
      {% else %}
          (<a href="?{{ url }}&amp;page={{ params.page }}&amp;flat=1">cacher les posters</a>),
      {% endif %}
      soit en utilisant la barre de recherche.
    </li>
    <li>
      Cliquez sur l'onglet <a href="/reco/">Mes recommandations</a> pour voir ce que vous conseille <em>Mangaki</em> !
    </li>
  </ol>
  <p>
    La liste compte actuellement <strong>{{ anime_count }}</strong> <em>anime</em>.
    <br />
    Trier : <a href="/anime/?letter=0">#</a>
    {% for letter in 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' %}
        <a href="/anime/?letter={{ letter|lower }}">{{ letter }}</a>
    {% endfor %}
  </p>
  <p>
    <span class="label label-success"><span class="glyphicon glyphicon-thumbs-up"></span> J'aime</span>
    <span class="label label-warning"><span class="glyphicon glyphicon-adjust"></span> Neutre</span>
    <span class="label label-danger"><span class="glyphicon glyphicon-thumbs-down"></span> Je n'aime pas</span>
    <span class="label label-primary"><span class="glyphicon glyphicon-eye-open"></span> Je veux voir</span>
    <span class="label label-info"><span class="glyphicon glyphicon-eye-close"></span> Je ne veux pas voir</span>
  </p>
</div>
{% else %}
<div class="well">
  <p>
    Nouveau sur Mangaki ? <a href="/user/signup/">Inscrivez-vous</a> puis
    <a href="/user/login/">connectez-vous</a> pour noter ces <em>anime</em>
    et obtenir des recommandations.
  </p>
</div>
{% endif %}
<div class="row">
    <form class="typeahead-demo {{ category }}">
        <input type="text" data-category="{{ category }}" class="typeahead" />
    </form>
</div>
<ul class="nav nav-tabs">
    <li role="presentation"{% if params.sort == 'popularity' %} class="active"{% endif %}><a href="/anime/">Les plus populaires</a></li>
    <li role="presentation"{% if params.sort == 'controversy' %} class="active"{% endif %}><a href="/anime/?sort=controversy">Les plus controversés</a></li>
    <li role="presentation"{% if params.sort == 'random' %} class="active"{% endif %}><a href="/anime/?sort=random">Sélection au hasard</a></li>
</ul>
<br />
<div class="row mangas-list">
    {% for object in object_list %}
        {% include template_mode with work=object class="anime" rating=object.rating %}
    {% endfor %}
</div>
<nav style="text-align: center">
  <ul class="pagination">
    {% if object_list.has_previous %}
    <li>
      <a href="?{{ url }}&amp;page={{ object_list.previous_page_number }}" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
      </a>
    </li>
    {% endif %}
    {% for page in pages %}
        <li><a href="?{{ url }}&amp;page={{ page }}">{% if params.page == page %}<strong>{{ page }}</strong>{% else %}{{ page }}{% endif %}</a></li>
    {% endfor %}
    {% if object_list.has_next %}
    <li>
      <a href="?{{ url }}&amp;page={{ object_list.next_page_number }}" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
    {% endif %}
  </ul>
</nav>
<br />
<br />
<br />
<script>
loadMenu('anime');
</script>
{% endblock %}
