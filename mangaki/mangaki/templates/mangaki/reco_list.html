{% extends "base.html" %}

{% block body %}
{% if reco_list|length > 0 %}
    <div class="well">
        <p>
            Voici quatre recommandations qui devraient vous
            plaire.<br />
            Notez-les puis rechargez la page pour en faire apparaître
            d'autres.
        </p>
        <div align="right">
            Légende : 
            <span class="label label-success"><span class="glyphicon glyphicon-thumbs-up"></span> J'aime</span>
            <span class="label label-warning"><span class="glyphicon glyphicon-adjust"></span> Neutre</span>
            <span class="label label-danger"><span class="glyphicon glyphicon-thumbs-down"></span> Je n'aime pas</span>
            <span class="label label-primary"><span class="glyphicon glyphicon-eye-open"></span> Je veux lire</span>
            <span class="label label-info"><span class="glyphicon glyphicon-eye-close"></span> Je ne veux pas lire</span>
        </div>
    </div>
    <ul class="nav nav-tabs">
        <li role="presentation"{% if category == 'all' %} class="active"{% endif %}><a href="/reco/">Tout</a></li>
        <li role="presentation"{% if category == 'anime' %} class="active"{% endif %}><a href="/reco/?category=anime"><em>Anime</em> seulement</a></li>
        <li role="presentation"{% if category == 'manga' %} class="active"{% endif %}><a href="/reco/?category=manga">Manga seulement</a></li>
    </ul>
    <br />
    <div class="row mangas-list">
    {% for reco, category in reco_list %}
        {% include "work_poster.html" with category=category work=reco %}
    {% endfor %}
    </div>
    <a class="btn btn-primary btn-lg" href="/reco/?category={{ category }}" style="display: block; margin: auto">Je veux d'autres recommandations ! (Après avoir noté celles-ci.)</a>
    <script>
    sort_mode = '';
    $.getJSON('/data/reco/{{ category }}.json', function(data) {
        data.forEach(function(work, i) {
            displayWork(i + 1, work);
        });
    });
    </script>
{% else %}
    <p class="well">Pour obtenir une recommandation, il faut au moins avoir <a href="/anime/">noté un <em>anime</em></a> !</p>
{% endif %}
{% endblock %}
